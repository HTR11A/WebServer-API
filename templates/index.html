<html>
<head>
    <title>Шифратор сообщений</title>
    <script type="text/javascript">
        function toggleKeyInput() {
            var mode = document.querySelector('input[name="mode"]:checked').value;
            var keyField = document.getElementById('keyField');
            keyField.style.display = (mode === 'decode') ? 'block' : 'none';
        }
    </script>
</head>
<body onload="toggleKeyInput()">
    <h1>{{ 'Зашифровать' if form.mode.data == 'encode' else 'Расшифровать' }} Сообщение</h1>
    <form method="POST">
        {{ form.hidden_tag() }}
        <p>
            {{ form.mode.label }}<br>
            {{ form.mode(onchange="toggleKeyInput()") }}
        </p>
        <p>
            {{ form.message.label }}<br>
            {{ form.message(size=32) }}
        </p>
        <div id="keyField" style="{{ 'display:none;' if form.mode.data == 'encode' else 'display:block;' }}">
            {{ form.key.label }}<br>
            {{ form.key(size=32) }}
        </div>
        <p>{{ form.submit() }}</p>
    </form>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% endwith %}
